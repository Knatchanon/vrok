var  config = require('./dbconfig');
const  sql = require('mssql');

async  function  getcompanys() {
    try {
      let  pool = await  sql.connect(config);
      let  company = await  pool.request().query("SELECT * from m_company");
      return  company.recordsets;
    }
    catch (error) {
      console.log(error);
    }
  }
  async  function  getcompany(company_id) {
    try {
      let  pool = await  sql.connect(config);
      let  company = await  pool.request()
      .input('input_parameter', sql.Int, company_id)
      .query("SELECT * from m_company where Id = @input_parameter");
      return  company.recordsets;
    }
    catch (error) {
      console.log(error);
    }
  }

  async  function  addcompany(m_company) {
    try {
      let  pool = await  sql.connect(config);
      let  insertCompany = await  pool.request()
      .input('company_id', sql.Int, order.company_id)
      .input('company_name', sql.NVarChar, order.company_name)
      .input('create_date', sql.Int, order.create_date)
      .input('create_by', sql.NVarChar, order.create_by)
      .input('update_date', sql.NVarChar, order.update_date)
      .input('update_by', sql.NVarChar, order.update_by)
      .execute('Insertcompany');
      return  insertCompany.recordsets;
    }
    catch (err) {
      console.log(err);
    }
  }

  module.exports = {
    getcompanys:  getcompanys,
    getcompany:  getcompany,
    addcompany:  addcompany
  }